<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>ggplot2 quick reference – Plot quick reference</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-aa46d88f44b8608d880805adbee39327.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<script src="site_libs/plotly-binding-4.10.4/plotly.js"></script>

<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>

<script src="site_libs/jquery-3.5.1/jquery.min.js"></script>

<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">

<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>

<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">

<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Plot quick reference</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.qmd"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./ggplot2_quick_ref.html" aria-current="page"> 
<span class="menu-text">ggplot2</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./seaborn_quick_ref.html"> 
<span class="menu-text">Seaborn</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#plot-examples" id="toc-plot-examples" class="nav-link active" data-scroll-target="#plot-examples">Plot examples</a>
  <ul class="collapse">
  <li><a href="#scatter" id="toc-scatter" class="nav-link" data-scroll-target="#scatter">Scatter plots</a></li>
  <li><a href="#bar" id="toc-bar" class="nav-link" data-scroll-target="#bar">Bar plots</a></li>
  <li><a href="#histograms" id="toc-histograms" class="nav-link" data-scroll-target="#histograms">Histograms</a></li>
  <li><a href="#box" id="toc-box" class="nav-link" data-scroll-target="#box">Box plots</a></li>
  <li><a href="#distribution-plots" id="toc-distribution-plots" class="nav-link" data-scroll-target="#distribution-plots">Distribution plots</a></li>
  <li><a href="#time-series" id="toc-time-series" class="nav-link" data-scroll-target="#time-series">Time series</a></li>
  <li><a href="#maps" id="toc-maps" class="nav-link" data-scroll-target="#maps">Maps</a></li>
  </ul></li>
  <li><a href="#interactive-charts" id="toc-interactive-charts" class="nav-link" data-scroll-target="#interactive-charts">Interactive charts</a>
  <ul class="collapse">
  <li><a href="#plotly" id="toc-plotly" class="nav-link" data-scroll-target="#plotly">Plotly</a></li>
  </ul></li>
  <li><a href="#theme-settings" id="toc-theme-settings" class="nav-link" data-scroll-target="#theme-settings">Theme settings</a>
  <ul class="collapse">
  <li><a href="#color-palettes" id="toc-color-palettes" class="nav-link" data-scroll-target="#color-palettes">Color palettes</a></li>
  <li><a href="#legends" id="toc-legends" class="nav-link" data-scroll-target="#legends">Legends</a></li>
  <li><a href="#elements" id="toc-elements" class="nav-link" data-scroll-target="#elements">Elements</a></li>
  <li><a href="#units-margins" id="toc-units-margins" class="nav-link" data-scroll-target="#units-margins">Units and margins</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">ggplot2 quick reference</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><a href="https://ggplot2.tidyverse.org/">ggplot2</a> is a declarative system for making graphics in R based on <a href="https://link.springer.com/book/10.1007/0-387-28695-0">The Grammar of Graphics</a>. This document contains plots made in ggplot2 and some information about theming in ggplot2 to use as reference. It is meant to help learn/renew skills and as a reference for some less standard plots (e.g.&nbsp;time series plots with feats/fable).</p>
<p>Posit upholds a <a href="https://posit.co/wp-content/uploads/2022/10/data-visualization-1.pdf">cheat sheet</a> for ggplot2, which shows most of its methods in a compact manner.</p>
<section id="plot-examples" class="level2">
<h2 class="anchored" data-anchor-id="plot-examples">Plot examples</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Data structure and manipulation libraries</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Library for combining ggplots </span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="scatter" class="level3">
<h3 class="anchored" data-anchor-id="scatter">Scatter plots</h3>
<p>You can separate data on <code>color</code>, <code>shape</code> and <code>size</code>. <code>alpha</code> can be used to make plots more readable when many data points are present. <code>position="jitter"</code> is useful in cases of discrete positions in data.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Standard</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Alpha</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Jitter</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x=</span>Sepal.Length, <span class="at">y=</span>Sepal.Width, <span class="at">color=</span>Species)) <span class="sc">+</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Sepal length"</span>) <span class="sc">+</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Sepal width"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/scatter-standard-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>Using alpha basically turns the plot into a 2d kernel density estimate (with a circular uniform kernel), which can be useful where points are densely packed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>R <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>, .<span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">0</span>,</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>              .<span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>              <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="sc">-</span>.<span class="dv">5</span>,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>              <span class="dv">0</span>, <span class="dv">0</span>, <span class="sc">-</span>.<span class="dv">5</span>, <span class="dv">1</span>), </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">nrow =</span> <span class="dv">4</span>, <span class="at">ncol =</span> <span class="dv">4</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>mu <span class="ot">=</span> <span class="fu">c</span>(<span class="at">X1=</span><span class="dv">0</span>, <span class="at">X2=</span><span class="dv">0</span>, <span class="at">Y1=</span><span class="sc">-</span><span class="dv">1</span>, <span class="at">Y2=</span><span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> mvtnorm<span class="sc">::</span><span class="fu">rmvnorm</span>(n, <span class="at">mean=</span>mu, <span class="at">sigma=</span>R )</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">Class=</span><span class="st">"C1"</span>, <span class="at">x =</span> data[,<span class="st">"X1"</span>], <span class="at">y=</span>data[, <span class="st">"X2"</span>]) <span class="sc">|&gt;</span> </span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">bind_rows</span>(</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>          <span class="fu">tibble</span>(<span class="at">Class=</span><span class="st">"C2"</span>, <span class="at">x =</span> data[,<span class="st">"Y1"</span>], <span class="at">y=</span>data[, <span class="st">"Y2"</span>])</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>y)) <span class="sc">+</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Standard"</span>)</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>y)) <span class="sc">+</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.1</span>, <span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Alpha = 0.1"</span>)</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> p2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/scatter-alpha-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<p>Example taken from <a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">ggplot2 reference</a>. Shows the same data with and without jitter. Another option for categorical scatter plots is the <a href="https://r-graph-gallery.com/beeswarm.html">beeswarm plot</a>, which separates the points in a systematic way rather than random.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(cyl, hwy)) <span class="sc">+</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(cyl, hwy)) <span class="sc">+</span> </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="st">"jitter"</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a> p1 <span class="sc">+</span> p2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/scatter-jitter-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>A pair-wise plot can quite easily be made with the library <a href="https://ggobi.github.io/ggally/">GGally</a>. The diagonal and the upper and lower triangle each have a default plot type for continuous, discrete and combo (discrete on one axis and continuous on the other). These can be changed in the method, see <code>ggpairs()</code> documentation for more information.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggpairs</span>(iris, <span class="at">columns =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="fu">aes</span>(<span class="at">color=</span>Species, <span class="at">fill=</span>Species),</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">diag =</span> <span class="fu">list</span>(<span class="at">continuous =</span> <span class="fu">wrap</span>(<span class="st">"densityDiag"</span>, <span class="at">alpha=</span><span class="fl">0.6</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/scatter-pair-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="bar" class="level3">
<h3 class="anchored" data-anchor-id="bar">Bar plots</h3>
<p>Bar plots can be used either through <code>geom_bar()</code>, which counts the number of instances of each group of x or y, or through <code>geom_col()</code> which takes the height/length of the bars.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">geom_bar()</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">geom_col()</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Sepal.Length <span class="sc">&gt;</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Species, <span class="at">fill=</span>Species)) <span class="sc">+</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Flowers with sepal length &gt; 5cm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/bar1-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">|&gt;</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">|&gt;</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise_all</span>(mean) <span class="sc">|&gt;</span> </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>Species, <span class="at">values_to =</span> <span class="st">"Mean"</span>) <span class="sc">|&gt;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>name, <span class="at">y=</span>Mean, <span class="at">fill=</span>Species)) <span class="sc">+</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge2"</span>) <span class="sc">+</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/bar2-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="histograms" class="level3 tabset">
<h3 class="tabset anchored" data-anchor-id="histograms">Histograms</h3>
<p>Default position is <code>"stack"</code>. Use position <code>"identity"</code> for overlapping histograms. Bins/binwidth is determined automatically for this example. Change bins with <code>bins = n</code> or <code>binwidth = c</code>.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Stack</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Identity</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x=</span>Sepal.Length, <span class="at">fill=</span>Species)) <span class="sc">+</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/hist-stack-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x=</span>Sepal.Length, <span class="at">fill=</span>Species)) <span class="sc">+</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">position=</span><span class="st">"identity"</span>, <span class="at">alpha=</span><span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/hist-overlap-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="box" class="level3">
<h3 class="anchored" data-anchor-id="box">Box plots</h3>
<p>Boxplots are straight forward to generate. Below you can see two examples. Interquartile range can be changed through <code>coef</code> which defaults to 1.5.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Standard</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Grouped</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x=</span>Sepal.Length, <span class="at">y=</span>Species, <span class="at">fill=</span>Species)) <span class="sc">+</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/box-standard-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<p>Grouped example of box plots. Position defaults to <code>"dodge2"</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">|&gt;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>Species) <span class="sc">|&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y=</span>value, <span class="at">x=</span>name, <span class="at">fill=</span>Species)) <span class="sc">+</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"cm"</span>, <span class="at">x=</span><span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/box-grouped-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="distribution-plots" class="level3">
<h3 class="anchored" data-anchor-id="distribution-plots">Distribution plots</h3>
<p>The <code>geom_density()</code> function takes data and runs a kernel density estimation. <code>kernel</code> can be set to one of <code>"gaussian"</code>, <code>"rectangular"</code>, <code>"triangular"</code>, <code>"epanechnikov"</code>, <code>"biweight"</code>, <code>"cosine"</code> or <code>"optocosine"</code> with <code>kernel = "gaussian"</code> as default. Defaults to <code>position=identity</code>, other options for this is <code>stack</code> which stacks the densities on top of each other and potentially <code>fill</code> (one should however be careful and fully aware of what is displayed when using the latter option).</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">Identity</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">Stack</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-3" role="tab" aria-controls="tabset-5-3" aria-selected="false">Faceted</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-4" role="tab" aria-controls="tabset-5-4" aria-selected="false">Flipped</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x=</span>Sepal.Length, <span class="at">color=</span>Species, <span class="at">fill =</span> Species)) <span class="sc">+</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha=</span><span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="at">bounds=</span><span class="fu">c</span>(<span class="dv">4</span>, <span class="fl">8.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/kde-standard-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x=</span>Sepal.Length, <span class="at">color=</span>Species, <span class="at">fill =</span> Species)) <span class="sc">+</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">position=</span><span class="st">"stack"</span>, <span class="at">alpha=</span><span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="at">bounds=</span><span class="fu">c</span>(<span class="dv">4</span>, <span class="fl">8.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/kde-stacked-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-5-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-3-tab">
<p>For separated distribution plots we can use <code>facet_grid()</code>, which creates a grid according to given rules of data. Given data frame column names C1 and C2 the data can be faceted according to: <code>C1 ~ .</code> for rows, <code>. ~ C1</code> for columns and <code>C1 ~ C2</code> for a grid. <code>rows=vars(C1)</code> and <code>cols=vars(C2)</code> can be used instead.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x=</span>Sepal.Length, <span class="at">fill=</span>Species, <span class="at">color=</span>Species)) <span class="sc">+</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">show.legend =</span> F, <span class="at">alpha=</span><span class="fl">0.8</span>) <span class="sc">+</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(Species <span class="sc">~</span> .) <span class="sc">+</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="fu">c</span>(<span class="dv">4</span>,<span class="fl">8.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/kde-faceted-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-5-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-4-tab">
<p>Borrowed example from <a href="https://r-graph-gallery.com/294-basic-ridgeline-plot.html#color">The R Graph Gallery</a> with axis flipped. In my opinion, this is a better option than the very similar violin plot when many distributions are to be shown in comparison to each other. Note that this uses the library <a href="https://github.com/wilkelab/ggridges">ggridges</a> to create a “ridgeline plot” (faceted distribution plot with height able to overlap the above distribution). More information on these might be added later.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggridges)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(lincoln_weather, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Mean Temperature [F]</span><span class="st">`</span>, <span class="at">y =</span> Month, <span class="at">fill =</span> <span class="fu">stat</span>(x))) <span class="sc">+</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges_gradient</span>(<span class="at">scale =</span> <span class="fl">0.95</span>, <span class="at">rel_min_height =</span> <span class="fl">0.01</span>) <span class="sc">+</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">name =</span> <span class="st">"Temp. [F]"</span>, <span class="at">option =</span> <span class="st">"C"</span>) <span class="sc">+</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/kde-ridge-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="time-series" class="level3">
<h3 class="anchored" data-anchor-id="time-series">Time series</h3>
<p>Using the <a href="https://tsibble.tidyverts.org/">tsibble</a> and <a href="https://feasts.tidyverts.org/">feasts</a> libraries, many plots related to time series analysis can easily be created. Below is an example of a plot of a time series.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Time series libraries</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tsibble)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(feasts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true">Standard</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false">Season</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-3" role="tab" aria-controls="tabset-6-3" aria-selected="false">Decomposition</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-4" role="tab" aria-controls="tabset-6-4" aria-selected="false">Residual</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-5" role="tab" aria-controls="tabset-6-5" aria-selected="false">Forecast</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>air_pas <span class="ot">&lt;-</span>  <span class="fu">as_tsibble</span>(AirPassengers)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>air_pas <span class="sc">|&gt;</span> </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>() <span class="sc">+</span> </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Air passengers (in thousands)"</span>) <span class="sc">+</span> </span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">""</span>) <span class="sc">+</span>  </span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Monthly international air passengers 1949-1960"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/ts-standard-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<p>Two useful plots for inspecting seasonal changes can be seen below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>p_seas <span class="ot">&lt;-</span> <span class="fu">gg_season</span>(air_pas, <span class="at">labels =</span> <span class="st">"right"</span>, <span class="at">labels_repel =</span> <span class="cn">TRUE</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>p_sub <span class="ot">&lt;-</span> <span class="fu">gg_subseries</span>(air_pas)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>p_seas <span class="sc">/</span> p_sub <span class="co">#plots combined through patchwork (library) </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/ts-season-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-6-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-3-tab">
<p>A plot of a time series decomposition can also be displayed as follows. Here STL is used. The trend and seasonal windows are determined automatically for this example.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>air_pas.stl <span class="ot">&lt;-</span> air_pas <span class="sc">|&gt;</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">value =</span> <span class="fu">log</span>(value)) <span class="sc">|&gt;</span> <span class="co"># Log series since seasonality seems multiplicative with trend</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model</span>(</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">STL</span>(value <span class="sc">~</span> <span class="fu">trend</span>() <span class="sc">+</span> <span class="fu">season</span>())) <span class="co"># The windows for trend and seasonality are automatically determined for this example</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>air_pas.stl <span class="sc">|&gt;</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">components</span>() <span class="sc">|&gt;</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"STL decomposition of log(AirPassengers)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/ts-decomp-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-6-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-4-tab">
<p>A plot for autocorrelation and partial autocorrelation can easily be made from a series. Note that the remainder seems to show some heteroscedasticity and as a result probably isn’t stationary.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>air_pas.stl <span class="sc">|&gt;</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">components</span>() <span class="sc">|&gt;</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gg_tsdisplay</span>(<span class="at">y =</span> remainder, <span class="at">plot_type =</span> <span class="st">'partial'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/ts-residual-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-6-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-5-tab">
<p>Forecasts with accompanying confidence intervals can be displayed and estimated with the library <a href="https://fable.tidyverts.org/">fable</a>. Set <code>level</code> to change the confidence intervals, with <code>NULL</code> for no intervals or a list of numbers representing the percentages. Defaults to <code>levels=c(80,95)</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fable)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>ts <span class="ot">&lt;-</span> tsibbledata<span class="sc">::</span>aus_production <span class="sc">|&gt;</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Electricity) </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> ts <span class="sc">|&gt;</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model</span>( <span class="fu">ARIMA</span>(Electricity), <span class="fu">ETS</span>(Electricity))</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>fit <span class="sc">|&gt;</span> </span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h=</span><span class="st">"5 years"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(ts <span class="sc">|&gt;</span> <span class="fu">filter</span>(Quarter <span class="sc">&gt;</span> <span class="fu">yearquarter</span>(<span class="st">"1995 Q1"</span>)), <span class="at">level=</span><span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">95</span>, <span class="dv">99</span>)) <span class="sc">+</span> </span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(.model <span class="sc">~</span> .)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/ts-forecast-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="maps" class="level3">
<h3 class="anchored" data-anchor-id="maps">Maps</h3>
<p>ggplot2 makes it easy to plot maps with <a href="https://en.wikipedia.org/wiki/Simple_Features">simple features</a> data through <code>geom_sf()</code>. SF maps can be directly accessed through e.g.:</p>
<ul>
<li><a href="https://github.com/ropensci/rnaturalearth">rnaturalearth</a>: R interface for the <a href="https://www.naturalearthdata.com/">Natural earth dataset</a></li>
<li><a href="https://ropengov.github.io/giscoR/">GiscoR</a>: R interface/API for <a href="https://ec.europa.eu/eurostat/web/gisco">Eurostat GISCO</a></li>
</ul>
<p>Otherwise, the R package <a href="https://r-spatial.github.io/sf/">sf</a> contains tools for working with of SF data and also converting some data types to SF (see https://r-spatial.github.io/sf/articles/sf2.html).</p>
<p>In these examples we will use <code>rnaturalearth</code> to obtain map data and join it with other data.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true">Africa</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false">Europe</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-3" role="tab" aria-controls="tabset-7-3" aria-selected="false">Point maps</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-4" role="tab" aria-controls="tabset-7-4" aria-selected="false">Projections</a></li></ul>
<div class="tab-content">
<div id="tabset-7-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<p>Continents or countries can be obtained separately with <code>rnaturalearth</code> and, depending on the continent, used as is. Here the map data from Africa is obtained and joined with data from the <a href="https://github.com/jennybc/gapminder">gapminder data set</a>.</p>
<p>Both data sets support the <a href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166-1 alpha-3</a> naming standard and can as a result easily be combined.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder) <span class="co"># Data used in the example</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>afr_map <span class="ot">&lt;-</span> <span class="fu">ne_countries</span>(<span class="at">continent =</span> <span class="st">"Africa"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(iso_a3)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>gapm <span class="ot">&lt;-</span> gapminder <span class="sc">|&gt;</span> </span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year<span class="sc">==</span><span class="dv">2007</span> <span class="sc">&amp;</span> continent <span class="sc">==</span> <span class="st">"Africa"</span>) <span class="sc">|&gt;</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(country_codes) <span class="sc">|&gt;</span> </span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(iso_alpha, lifeExp)</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>afr_map  <span class="sc">|&gt;</span> </span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(gapm, <span class="at">by=</span><span class="fu">join_by</span>(iso_a3 <span class="sc">==</span> iso_alpha)) <span class="sc">|&gt;</span> </span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">fill=</span>lifeExp)) <span class="sc">+</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Life expectancy 2007"</span>, <span class="at">fill =</span> <span class="st">"Years"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/map-selection-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-7-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<p>Given that some countries in Europe have overseas territory, e.g.&nbsp;Guadeloupe and the Falkland islands, a map of the continent might need coordinate adjustments. Here we adjust the longitude and latitude displayed through <code>coord_sf()</code> and do not filter out non-European landmasses.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>world_map <span class="ot">&lt;-</span> <span class="fu">ne_countries</span>(<span class="at">scale =</span> <span class="st">"medium"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name) </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>eu_gdppc <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"./data/eu_gdppc_proc.csv"</span>) <span class="co"># Data from Eurostat</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>world_map <span class="sc">|&gt;</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(eu_gdppc, <span class="at">by=</span><span class="fu">join_by</span>(name <span class="sc">==</span> geo)) <span class="sc">|&gt;</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">!=</span> <span class="st">"Denmark"</span>) <span class="sc">|&gt;</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> X2024)) <span class="sc">+</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_sf</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">25</span>, <span class="dv">37</span>), <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">70</span>)) <span class="sc">+</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">""</span>, <span class="at">title =</span> <span class="st">"GDP per capita 2024"</span>) <span class="sc">+</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">"OrRd"</span>, <span class="at">direction=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/map-coordinates-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-7-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-3-tab">
<p>For point or bubble maps either <code>geom_point()</code> or <code>geom_sf()</code> can be used depending on the data used. Here the <code>sf</code> package is used to calculate centroids of the countries and <code>geom_sf()</code> to plot them. Points are also manually inserted and added to the plot to show <code>geom_point()</code> functionality. Note that these points represent latitude and longitude in the default projection.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Spherical geometry needs to be turned off for calculating centroids for this data set</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>sf<span class="sc">::</span><span class="fu">sf_use_s2</span>(<span class="cn">FALSE</span>) </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>afr_map <span class="ot">&lt;-</span> <span class="fu">ne_countries</span>(<span class="at">continent =</span> <span class="st">"Africa"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(iso_a3) <span class="sc">|&gt;</span> </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">centroid =</span> sf<span class="sc">::</span><span class="fu">st_centroid</span>(geometry))</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>sf<span class="sc">::</span><span class="fu">sf_use_s2</span>(<span class="cn">TRUE</span>)</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>gapm <span class="ot">&lt;-</span> gapminder <span class="sc">|&gt;</span> </span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year<span class="sc">==</span><span class="dv">2007</span> <span class="sc">&amp;</span> continent <span class="sc">==</span> <span class="st">"Africa"</span>) <span class="sc">|&gt;</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(country_codes) <span class="sc">|&gt;</span> </span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(iso_alpha, lifeExp)</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>mypoints <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x=</span><span class="fu">c</span>(<span class="dv">50</span>, <span class="dv">45</span>, <span class="dv">44</span>, <span class="dv">45</span>, <span class="dv">46</span>, <span class="dv">47</span>, <span class="dv">48</span>, <span class="dv">49</span>, <span class="dv">50</span>, <span class="dv">51</span>), </span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y=</span><span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">30</span>, <span class="dv">25</span>, <span class="dv">24</span>, <span class="fl">23.2</span>, <span class="dv">23</span>, <span class="dv">23</span>, <span class="fl">23.2</span>, <span class="dv">24</span>, <span class="dv">25</span>))</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>afr_map  <span class="sc">|&gt;</span> </span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(gapm, <span class="at">by=</span><span class="fu">join_by</span>(iso_a3 <span class="sc">==</span> iso_alpha)) <span class="sc">|&gt;</span> </span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Centroids are added to the plot</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">geometry =</span> centroid, <span class="at">color=</span>lifeExp), <span class="at">alpha=</span><span class="fl">0.8</span>, <span class="at">size =</span> <span class="dv">5</span>) <span class="sc">+</span> </span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Manual points are added to the plot</span></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> mypoints, <span class="fu">aes</span>(x, y)) <span class="sc">+</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Life expectancy 2007"</span>, <span class="at">color=</span><span class="st">"Years"</span>, <span class="at">x=</span><span class="st">""</span>, <span class="at">y=</span><span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/map-points-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-7-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-4-tab">
<p>I do not currently possess the knowledge of the framework to go into depth, however, coordinate reference systems (CRS) of the map can be changed. Here is a very simple example using the EPSG:3035 CRS.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>eur_map <span class="ot">&lt;-</span> <span class="fu">ne_countries</span>() <span class="sc">|&gt;</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(eur_map) <span class="sc">+</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">crs =</span> sf<span class="sc">::</span><span class="fu">st_crs</span>(<span class="st">"epsg:3035"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/map-CRS-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="interactive-charts" class="level2">
<h2 class="anchored" data-anchor-id="interactive-charts">Interactive charts</h2>
<section id="plotly" class="level3">
<h3 class="anchored" data-anchor-id="plotly">Plotly</h3>
<p>Plots from ggplot2 can be turned into interactive plots through the library <a href="https://github.com/plotly/plotly.R">plotly</a>, usually with the ease of “plug and play”. The resulting charts are equipped with a hover-over tooltip, panning, zooming and selections which can, for example, be used with shiny.</p>
<p>Here are a few examples of some interactive charts using the method.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-8-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-1" role="tab" aria-controls="tabset-8-1" aria-selected="true">Scatter plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-2" role="tab" aria-controls="tabset-8-2" aria-selected="false">Box plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-3" role="tab" aria-controls="tabset-8-3" aria-selected="false">Histogram</a></li></ul>
<div class="tab-content">
<div id="tabset-8-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-8-1-tab">
<p>Variables not present in the chart can be added to the hover-over tooltip by adding them to the ggplot2 aesthetics with a chosen name. For example, label1, label2, etc.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">color=</span>Species, <span class="at">x=</span>Sepal.Length, <span class="at">y=</span>Sepal.Width, <span class="at">label1=</span>Petal.Width, <span class="at">label2=</span>Petal.Length)) <span class="sc">+</span> </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Sepal length"</span>) <span class="sc">+</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Sepal width"</span>)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-3c6b46526040fc9a3695" style="width:100%;height:487px;"></div>
<script type="application/json" data-for="htmlwidget-3c6b46526040fc9a3695">{"x":{"data":[{"x":[5.0999999999999996,4.9000000000000004,4.7000000000000002,4.5999999999999996,5,5.4000000000000004,4.5999999999999996,5,4.4000000000000004,4.9000000000000004,5.4000000000000004,4.7999999999999998,4.7999999999999998,4.2999999999999998,5.7999999999999998,5.7000000000000002,5.4000000000000004,5.0999999999999996,5.7000000000000002,5.0999999999999996,5.4000000000000004,5.0999999999999996,4.5999999999999996,5.0999999999999996,4.7999999999999998,5,5,5.2000000000000002,5.2000000000000002,4.7000000000000002,4.7999999999999998,5.4000000000000004,5.2000000000000002,5.5,4.9000000000000004,5,5.5,4.9000000000000004,4.4000000000000004,5.0999999999999996,5,4.5,4.4000000000000004,5,5.0999999999999996,4.7999999999999998,5.0999999999999996,4.5999999999999996,5.2999999999999998,5],"y":[3.5,3,3.2000000000000002,3.1000000000000001,3.6000000000000001,3.8999999999999999,3.3999999999999999,3.3999999999999999,2.8999999999999999,3.1000000000000001,3.7000000000000002,3.3999999999999999,3,3,4,4.4000000000000004,3.8999999999999999,3.5,3.7999999999999998,3.7999999999999998,3.3999999999999999,3.7000000000000002,3.6000000000000001,3.2999999999999998,3.3999999999999999,3,3.3999999999999999,3.5,3.3999999999999999,3.2000000000000002,3.1000000000000001,3.3999999999999999,4.0999999999999996,4.2000000000000002,3.1000000000000001,3.2000000000000002,3.5,3.6000000000000001,3,3.3999999999999999,3.5,2.2999999999999998,3.2000000000000002,3.5,3.7999999999999998,3,3.7999999999999998,3.2000000000000002,3.7000000000000002,3.2999999999999998],"text":["Sepal.Length: 5.1<br />Sepal.Width: 3.5<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.4","Sepal.Length: 4.9<br />Sepal.Width: 3.0<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.4","Sepal.Length: 4.7<br />Sepal.Width: 3.2<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.3","Sepal.Length: 4.6<br />Sepal.Width: 3.1<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.5","Sepal.Length: 5.0<br />Sepal.Width: 3.6<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.4","Sepal.Length: 5.4<br />Sepal.Width: 3.9<br />Species: setosa<br />Petal.Width: 0.4<br />Petal.Length: 1.7","Sepal.Length: 4.6<br />Sepal.Width: 3.4<br />Species: setosa<br />Petal.Width: 0.3<br />Petal.Length: 1.4","Sepal.Length: 5.0<br />Sepal.Width: 3.4<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.5","Sepal.Length: 4.4<br />Sepal.Width: 2.9<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.4","Sepal.Length: 4.9<br />Sepal.Width: 3.1<br />Species: setosa<br />Petal.Width: 0.1<br />Petal.Length: 1.5","Sepal.Length: 5.4<br />Sepal.Width: 3.7<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.5","Sepal.Length: 4.8<br />Sepal.Width: 3.4<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.6","Sepal.Length: 4.8<br />Sepal.Width: 3.0<br />Species: setosa<br />Petal.Width: 0.1<br />Petal.Length: 1.4","Sepal.Length: 4.3<br />Sepal.Width: 3.0<br />Species: setosa<br />Petal.Width: 0.1<br />Petal.Length: 1.1","Sepal.Length: 5.8<br />Sepal.Width: 4.0<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.2","Sepal.Length: 5.7<br />Sepal.Width: 4.4<br />Species: setosa<br />Petal.Width: 0.4<br />Petal.Length: 1.5","Sepal.Length: 5.4<br />Sepal.Width: 3.9<br />Species: setosa<br />Petal.Width: 0.4<br />Petal.Length: 1.3","Sepal.Length: 5.1<br />Sepal.Width: 3.5<br />Species: setosa<br />Petal.Width: 0.3<br />Petal.Length: 1.4","Sepal.Length: 5.7<br />Sepal.Width: 3.8<br />Species: setosa<br />Petal.Width: 0.3<br />Petal.Length: 1.7","Sepal.Length: 5.1<br />Sepal.Width: 3.8<br />Species: setosa<br />Petal.Width: 0.3<br />Petal.Length: 1.5","Sepal.Length: 5.4<br />Sepal.Width: 3.4<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.7","Sepal.Length: 5.1<br />Sepal.Width: 3.7<br />Species: setosa<br />Petal.Width: 0.4<br />Petal.Length: 1.5","Sepal.Length: 4.6<br />Sepal.Width: 3.6<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.0","Sepal.Length: 5.1<br />Sepal.Width: 3.3<br />Species: setosa<br />Petal.Width: 0.5<br />Petal.Length: 1.7","Sepal.Length: 4.8<br />Sepal.Width: 3.4<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.9","Sepal.Length: 5.0<br />Sepal.Width: 3.0<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.6","Sepal.Length: 5.0<br />Sepal.Width: 3.4<br />Species: setosa<br />Petal.Width: 0.4<br />Petal.Length: 1.6","Sepal.Length: 5.2<br />Sepal.Width: 3.5<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.5","Sepal.Length: 5.2<br />Sepal.Width: 3.4<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.4","Sepal.Length: 4.7<br />Sepal.Width: 3.2<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.6","Sepal.Length: 4.8<br />Sepal.Width: 3.1<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.6","Sepal.Length: 5.4<br />Sepal.Width: 3.4<br />Species: setosa<br />Petal.Width: 0.4<br />Petal.Length: 1.5","Sepal.Length: 5.2<br />Sepal.Width: 4.1<br />Species: setosa<br />Petal.Width: 0.1<br />Petal.Length: 1.5","Sepal.Length: 5.5<br />Sepal.Width: 4.2<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.4","Sepal.Length: 4.9<br />Sepal.Width: 3.1<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.5","Sepal.Length: 5.0<br />Sepal.Width: 3.2<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.2","Sepal.Length: 5.5<br />Sepal.Width: 3.5<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.3","Sepal.Length: 4.9<br />Sepal.Width: 3.6<br />Species: setosa<br />Petal.Width: 0.1<br />Petal.Length: 1.4","Sepal.Length: 4.4<br />Sepal.Width: 3.0<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.3","Sepal.Length: 5.1<br />Sepal.Width: 3.4<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.5","Sepal.Length: 5.0<br />Sepal.Width: 3.5<br />Species: setosa<br />Petal.Width: 0.3<br />Petal.Length: 1.3","Sepal.Length: 4.5<br />Sepal.Width: 2.3<br />Species: setosa<br />Petal.Width: 0.3<br />Petal.Length: 1.3","Sepal.Length: 4.4<br />Sepal.Width: 3.2<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.3","Sepal.Length: 5.0<br />Sepal.Width: 3.5<br />Species: setosa<br />Petal.Width: 0.6<br />Petal.Length: 1.6","Sepal.Length: 5.1<br />Sepal.Width: 3.8<br />Species: setosa<br />Petal.Width: 0.4<br />Petal.Length: 1.9","Sepal.Length: 4.8<br />Sepal.Width: 3.0<br />Species: setosa<br />Petal.Width: 0.3<br />Petal.Length: 1.4","Sepal.Length: 5.1<br />Sepal.Width: 3.8<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.6","Sepal.Length: 4.6<br />Sepal.Width: 3.2<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.4","Sepal.Length: 5.3<br />Sepal.Width: 3.7<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.5","Sepal.Length: 5.0<br />Sepal.Width: 3.3<br />Species: setosa<br />Petal.Width: 0.2<br />Petal.Length: 1.4"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"setosa","legendgroup":"setosa","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[7,6.4000000000000004,6.9000000000000004,5.5,6.5,5.7000000000000002,6.2999999999999998,4.9000000000000004,6.5999999999999996,5.2000000000000002,5,5.9000000000000004,6,6.0999999999999996,5.5999999999999996,6.7000000000000002,5.5999999999999996,5.7999999999999998,6.2000000000000002,5.5999999999999996,5.9000000000000004,6.0999999999999996,6.2999999999999998,6.0999999999999996,6.4000000000000004,6.5999999999999996,6.7999999999999998,6.7000000000000002,6,5.7000000000000002,5.5,5.5,5.7999999999999998,6,5.4000000000000004,6,6.7000000000000002,6.2999999999999998,5.5999999999999996,5.5,5.5,6.0999999999999996,5.7999999999999998,5,5.5999999999999996,5.7000000000000002,5.7000000000000002,6.2000000000000002,5.0999999999999996,5.7000000000000002],"y":[3.2000000000000002,3.2000000000000002,3.1000000000000001,2.2999999999999998,2.7999999999999998,2.7999999999999998,3.2999999999999998,2.3999999999999999,2.8999999999999999,2.7000000000000002,2,3,2.2000000000000002,2.8999999999999999,2.8999999999999999,3.1000000000000001,3,2.7000000000000002,2.2000000000000002,2.5,3.2000000000000002,2.7999999999999998,2.5,2.7999999999999998,2.8999999999999999,3,2.7999999999999998,3,2.8999999999999999,2.6000000000000001,2.3999999999999999,2.3999999999999999,2.7000000000000002,2.7000000000000002,3,3.3999999999999999,3.1000000000000001,2.2999999999999998,3,2.5,2.6000000000000001,3,2.6000000000000001,2.2999999999999998,2.7000000000000002,3,2.8999999999999999,2.8999999999999999,2.5,2.7999999999999998],"text":["Sepal.Length: 7.0<br />Sepal.Width: 3.2<br />Species: versicolor<br />Petal.Width: 1.4<br />Petal.Length: 4.7","Sepal.Length: 6.4<br />Sepal.Width: 3.2<br />Species: versicolor<br />Petal.Width: 1.5<br />Petal.Length: 4.5","Sepal.Length: 6.9<br />Sepal.Width: 3.1<br />Species: versicolor<br />Petal.Width: 1.5<br />Petal.Length: 4.9","Sepal.Length: 5.5<br />Sepal.Width: 2.3<br />Species: versicolor<br />Petal.Width: 1.3<br />Petal.Length: 4.0","Sepal.Length: 6.5<br />Sepal.Width: 2.8<br />Species: versicolor<br />Petal.Width: 1.5<br />Petal.Length: 4.6","Sepal.Length: 5.7<br />Sepal.Width: 2.8<br />Species: versicolor<br />Petal.Width: 1.3<br />Petal.Length: 4.5","Sepal.Length: 6.3<br />Sepal.Width: 3.3<br />Species: versicolor<br />Petal.Width: 1.6<br />Petal.Length: 4.7","Sepal.Length: 4.9<br />Sepal.Width: 2.4<br />Species: versicolor<br />Petal.Width: 1.0<br />Petal.Length: 3.3","Sepal.Length: 6.6<br />Sepal.Width: 2.9<br />Species: versicolor<br />Petal.Width: 1.3<br />Petal.Length: 4.6","Sepal.Length: 5.2<br />Sepal.Width: 2.7<br />Species: versicolor<br />Petal.Width: 1.4<br />Petal.Length: 3.9","Sepal.Length: 5.0<br />Sepal.Width: 2.0<br />Species: versicolor<br />Petal.Width: 1.0<br />Petal.Length: 3.5","Sepal.Length: 5.9<br />Sepal.Width: 3.0<br />Species: versicolor<br />Petal.Width: 1.5<br />Petal.Length: 4.2","Sepal.Length: 6.0<br />Sepal.Width: 2.2<br />Species: versicolor<br />Petal.Width: 1.0<br />Petal.Length: 4.0","Sepal.Length: 6.1<br />Sepal.Width: 2.9<br />Species: versicolor<br />Petal.Width: 1.4<br />Petal.Length: 4.7","Sepal.Length: 5.6<br />Sepal.Width: 2.9<br />Species: versicolor<br />Petal.Width: 1.3<br />Petal.Length: 3.6","Sepal.Length: 6.7<br />Sepal.Width: 3.1<br />Species: versicolor<br />Petal.Width: 1.4<br />Petal.Length: 4.4","Sepal.Length: 5.6<br />Sepal.Width: 3.0<br />Species: versicolor<br />Petal.Width: 1.5<br />Petal.Length: 4.5","Sepal.Length: 5.8<br />Sepal.Width: 2.7<br />Species: versicolor<br />Petal.Width: 1.0<br />Petal.Length: 4.1","Sepal.Length: 6.2<br />Sepal.Width: 2.2<br />Species: versicolor<br />Petal.Width: 1.5<br />Petal.Length: 4.5","Sepal.Length: 5.6<br />Sepal.Width: 2.5<br />Species: versicolor<br />Petal.Width: 1.1<br />Petal.Length: 3.9","Sepal.Length: 5.9<br />Sepal.Width: 3.2<br />Species: versicolor<br />Petal.Width: 1.8<br />Petal.Length: 4.8","Sepal.Length: 6.1<br />Sepal.Width: 2.8<br />Species: versicolor<br />Petal.Width: 1.3<br />Petal.Length: 4.0","Sepal.Length: 6.3<br />Sepal.Width: 2.5<br />Species: versicolor<br />Petal.Width: 1.5<br />Petal.Length: 4.9","Sepal.Length: 6.1<br />Sepal.Width: 2.8<br />Species: versicolor<br />Petal.Width: 1.2<br />Petal.Length: 4.7","Sepal.Length: 6.4<br />Sepal.Width: 2.9<br />Species: versicolor<br />Petal.Width: 1.3<br />Petal.Length: 4.3","Sepal.Length: 6.6<br />Sepal.Width: 3.0<br />Species: versicolor<br />Petal.Width: 1.4<br />Petal.Length: 4.4","Sepal.Length: 6.8<br />Sepal.Width: 2.8<br />Species: versicolor<br />Petal.Width: 1.4<br />Petal.Length: 4.8","Sepal.Length: 6.7<br />Sepal.Width: 3.0<br />Species: versicolor<br />Petal.Width: 1.7<br />Petal.Length: 5.0","Sepal.Length: 6.0<br />Sepal.Width: 2.9<br />Species: versicolor<br />Petal.Width: 1.5<br />Petal.Length: 4.5","Sepal.Length: 5.7<br />Sepal.Width: 2.6<br />Species: versicolor<br />Petal.Width: 1.0<br />Petal.Length: 3.5","Sepal.Length: 5.5<br />Sepal.Width: 2.4<br />Species: versicolor<br />Petal.Width: 1.1<br />Petal.Length: 3.8","Sepal.Length: 5.5<br />Sepal.Width: 2.4<br />Species: versicolor<br />Petal.Width: 1.0<br />Petal.Length: 3.7","Sepal.Length: 5.8<br />Sepal.Width: 2.7<br />Species: versicolor<br />Petal.Width: 1.2<br />Petal.Length: 3.9","Sepal.Length: 6.0<br />Sepal.Width: 2.7<br />Species: versicolor<br />Petal.Width: 1.6<br />Petal.Length: 5.1","Sepal.Length: 5.4<br />Sepal.Width: 3.0<br />Species: versicolor<br />Petal.Width: 1.5<br />Petal.Length: 4.5","Sepal.Length: 6.0<br />Sepal.Width: 3.4<br />Species: versicolor<br />Petal.Width: 1.6<br />Petal.Length: 4.5","Sepal.Length: 6.7<br />Sepal.Width: 3.1<br />Species: versicolor<br />Petal.Width: 1.5<br />Petal.Length: 4.7","Sepal.Length: 6.3<br />Sepal.Width: 2.3<br />Species: versicolor<br />Petal.Width: 1.3<br />Petal.Length: 4.4","Sepal.Length: 5.6<br />Sepal.Width: 3.0<br />Species: versicolor<br />Petal.Width: 1.3<br />Petal.Length: 4.1","Sepal.Length: 5.5<br />Sepal.Width: 2.5<br />Species: versicolor<br />Petal.Width: 1.3<br />Petal.Length: 4.0","Sepal.Length: 5.5<br />Sepal.Width: 2.6<br />Species: versicolor<br />Petal.Width: 1.2<br />Petal.Length: 4.4","Sepal.Length: 6.1<br />Sepal.Width: 3.0<br />Species: versicolor<br />Petal.Width: 1.4<br />Petal.Length: 4.6","Sepal.Length: 5.8<br />Sepal.Width: 2.6<br />Species: versicolor<br />Petal.Width: 1.2<br />Petal.Length: 4.0","Sepal.Length: 5.0<br />Sepal.Width: 2.3<br />Species: versicolor<br />Petal.Width: 1.0<br />Petal.Length: 3.3","Sepal.Length: 5.6<br />Sepal.Width: 2.7<br />Species: versicolor<br />Petal.Width: 1.3<br />Petal.Length: 4.2","Sepal.Length: 5.7<br />Sepal.Width: 3.0<br />Species: versicolor<br />Petal.Width: 1.2<br />Petal.Length: 4.2","Sepal.Length: 5.7<br />Sepal.Width: 2.9<br />Species: versicolor<br />Petal.Width: 1.3<br />Petal.Length: 4.2","Sepal.Length: 6.2<br />Sepal.Width: 2.9<br />Species: versicolor<br />Petal.Width: 1.3<br />Petal.Length: 4.3","Sepal.Length: 5.1<br />Sepal.Width: 2.5<br />Species: versicolor<br />Petal.Width: 1.1<br />Petal.Length: 3.0","Sepal.Length: 5.7<br />Sepal.Width: 2.8<br />Species: versicolor<br />Petal.Width: 1.3<br />Petal.Length: 4.1"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,186,56,1)"}},"hoveron":"points","name":"versicolor","legendgroup":"versicolor","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[6.2999999999999998,5.7999999999999998,7.0999999999999996,6.2999999999999998,6.5,7.5999999999999996,4.9000000000000004,7.2999999999999998,6.7000000000000002,7.2000000000000002,6.5,6.4000000000000004,6.7999999999999998,5.7000000000000002,5.7999999999999998,6.4000000000000004,6.5,7.7000000000000002,7.7000000000000002,6,6.9000000000000004,5.5999999999999996,7.7000000000000002,6.2999999999999998,6.7000000000000002,7.2000000000000002,6.2000000000000002,6.0999999999999996,6.4000000000000004,7.2000000000000002,7.4000000000000004,7.9000000000000004,6.4000000000000004,6.2999999999999998,6.0999999999999996,7.7000000000000002,6.2999999999999998,6.4000000000000004,6,6.9000000000000004,6.7000000000000002,6.9000000000000004,5.7999999999999998,6.7999999999999998,6.7000000000000002,6.7000000000000002,6.2999999999999998,6.5,6.2000000000000002,5.9000000000000004],"y":[3.2999999999999998,2.7000000000000002,3,2.8999999999999999,3,3,2.5,2.8999999999999999,2.5,3.6000000000000001,3.2000000000000002,2.7000000000000002,3,2.5,2.7999999999999998,3.2000000000000002,3,3.7999999999999998,2.6000000000000001,2.2000000000000002,3.2000000000000002,2.7999999999999998,2.7999999999999998,2.7000000000000002,3.2999999999999998,3.2000000000000002,2.7999999999999998,3,2.7999999999999998,3,2.7999999999999998,3.7999999999999998,2.7999999999999998,2.7999999999999998,2.6000000000000001,3,3.3999999999999999,3.1000000000000001,3,3.1000000000000001,3.1000000000000001,3.1000000000000001,2.7000000000000002,3.2000000000000002,3.2999999999999998,3,2.5,3,3.3999999999999999,3],"text":["Sepal.Length: 6.3<br />Sepal.Width: 3.3<br />Species: virginica<br />Petal.Width: 2.5<br />Petal.Length: 6.0","Sepal.Length: 5.8<br />Sepal.Width: 2.7<br />Species: virginica<br />Petal.Width: 1.9<br />Petal.Length: 5.1","Sepal.Length: 7.1<br />Sepal.Width: 3.0<br />Species: virginica<br />Petal.Width: 2.1<br />Petal.Length: 5.9","Sepal.Length: 6.3<br />Sepal.Width: 2.9<br />Species: virginica<br />Petal.Width: 1.8<br />Petal.Length: 5.6","Sepal.Length: 6.5<br />Sepal.Width: 3.0<br />Species: virginica<br />Petal.Width: 2.2<br />Petal.Length: 5.8","Sepal.Length: 7.6<br />Sepal.Width: 3.0<br />Species: virginica<br />Petal.Width: 2.1<br />Petal.Length: 6.6","Sepal.Length: 4.9<br />Sepal.Width: 2.5<br />Species: virginica<br />Petal.Width: 1.7<br />Petal.Length: 4.5","Sepal.Length: 7.3<br />Sepal.Width: 2.9<br />Species: virginica<br />Petal.Width: 1.8<br />Petal.Length: 6.3","Sepal.Length: 6.7<br />Sepal.Width: 2.5<br />Species: virginica<br />Petal.Width: 1.8<br />Petal.Length: 5.8","Sepal.Length: 7.2<br />Sepal.Width: 3.6<br />Species: virginica<br />Petal.Width: 2.5<br />Petal.Length: 6.1","Sepal.Length: 6.5<br />Sepal.Width: 3.2<br />Species: virginica<br />Petal.Width: 2.0<br />Petal.Length: 5.1","Sepal.Length: 6.4<br />Sepal.Width: 2.7<br />Species: virginica<br />Petal.Width: 1.9<br />Petal.Length: 5.3","Sepal.Length: 6.8<br />Sepal.Width: 3.0<br />Species: virginica<br />Petal.Width: 2.1<br />Petal.Length: 5.5","Sepal.Length: 5.7<br />Sepal.Width: 2.5<br />Species: virginica<br />Petal.Width: 2.0<br />Petal.Length: 5.0","Sepal.Length: 5.8<br />Sepal.Width: 2.8<br />Species: virginica<br />Petal.Width: 2.4<br />Petal.Length: 5.1","Sepal.Length: 6.4<br />Sepal.Width: 3.2<br />Species: virginica<br />Petal.Width: 2.3<br />Petal.Length: 5.3","Sepal.Length: 6.5<br />Sepal.Width: 3.0<br />Species: virginica<br />Petal.Width: 1.8<br />Petal.Length: 5.5","Sepal.Length: 7.7<br />Sepal.Width: 3.8<br />Species: virginica<br />Petal.Width: 2.2<br />Petal.Length: 6.7","Sepal.Length: 7.7<br />Sepal.Width: 2.6<br />Species: virginica<br />Petal.Width: 2.3<br />Petal.Length: 6.9","Sepal.Length: 6.0<br />Sepal.Width: 2.2<br />Species: virginica<br />Petal.Width: 1.5<br />Petal.Length: 5.0","Sepal.Length: 6.9<br />Sepal.Width: 3.2<br />Species: virginica<br />Petal.Width: 2.3<br />Petal.Length: 5.7","Sepal.Length: 5.6<br />Sepal.Width: 2.8<br />Species: virginica<br />Petal.Width: 2.0<br />Petal.Length: 4.9","Sepal.Length: 7.7<br />Sepal.Width: 2.8<br />Species: virginica<br />Petal.Width: 2.0<br />Petal.Length: 6.7","Sepal.Length: 6.3<br />Sepal.Width: 2.7<br />Species: virginica<br />Petal.Width: 1.8<br />Petal.Length: 4.9","Sepal.Length: 6.7<br />Sepal.Width: 3.3<br />Species: virginica<br />Petal.Width: 2.1<br />Petal.Length: 5.7","Sepal.Length: 7.2<br />Sepal.Width: 3.2<br />Species: virginica<br />Petal.Width: 1.8<br />Petal.Length: 6.0","Sepal.Length: 6.2<br />Sepal.Width: 2.8<br />Species: virginica<br />Petal.Width: 1.8<br />Petal.Length: 4.8","Sepal.Length: 6.1<br />Sepal.Width: 3.0<br />Species: virginica<br />Petal.Width: 1.8<br />Petal.Length: 4.9","Sepal.Length: 6.4<br />Sepal.Width: 2.8<br />Species: virginica<br />Petal.Width: 2.1<br />Petal.Length: 5.6","Sepal.Length: 7.2<br />Sepal.Width: 3.0<br />Species: virginica<br />Petal.Width: 1.6<br />Petal.Length: 5.8","Sepal.Length: 7.4<br />Sepal.Width: 2.8<br />Species: virginica<br />Petal.Width: 1.9<br />Petal.Length: 6.1","Sepal.Length: 7.9<br />Sepal.Width: 3.8<br />Species: virginica<br />Petal.Width: 2.0<br />Petal.Length: 6.4","Sepal.Length: 6.4<br />Sepal.Width: 2.8<br />Species: virginica<br />Petal.Width: 2.2<br />Petal.Length: 5.6","Sepal.Length: 6.3<br />Sepal.Width: 2.8<br />Species: virginica<br />Petal.Width: 1.5<br />Petal.Length: 5.1","Sepal.Length: 6.1<br />Sepal.Width: 2.6<br />Species: virginica<br />Petal.Width: 1.4<br />Petal.Length: 5.6","Sepal.Length: 7.7<br />Sepal.Width: 3.0<br />Species: virginica<br />Petal.Width: 2.3<br />Petal.Length: 6.1","Sepal.Length: 6.3<br />Sepal.Width: 3.4<br />Species: virginica<br />Petal.Width: 2.4<br />Petal.Length: 5.6","Sepal.Length: 6.4<br />Sepal.Width: 3.1<br />Species: virginica<br />Petal.Width: 1.8<br />Petal.Length: 5.5","Sepal.Length: 6.0<br />Sepal.Width: 3.0<br />Species: virginica<br />Petal.Width: 1.8<br />Petal.Length: 4.8","Sepal.Length: 6.9<br />Sepal.Width: 3.1<br />Species: virginica<br />Petal.Width: 2.1<br />Petal.Length: 5.4","Sepal.Length: 6.7<br />Sepal.Width: 3.1<br />Species: virginica<br />Petal.Width: 2.4<br />Petal.Length: 5.6","Sepal.Length: 6.9<br />Sepal.Width: 3.1<br />Species: virginica<br />Petal.Width: 2.3<br />Petal.Length: 5.1","Sepal.Length: 5.8<br />Sepal.Width: 2.7<br />Species: virginica<br />Petal.Width: 1.9<br />Petal.Length: 5.1","Sepal.Length: 6.8<br />Sepal.Width: 3.2<br />Species: virginica<br />Petal.Width: 2.3<br />Petal.Length: 5.9","Sepal.Length: 6.7<br />Sepal.Width: 3.3<br />Species: virginica<br />Petal.Width: 2.5<br />Petal.Length: 5.7","Sepal.Length: 6.7<br />Sepal.Width: 3.0<br />Species: virginica<br />Petal.Width: 2.3<br />Petal.Length: 5.2","Sepal.Length: 6.3<br />Sepal.Width: 2.5<br />Species: virginica<br />Petal.Width: 1.9<br />Petal.Length: 5.0","Sepal.Length: 6.5<br />Sepal.Width: 3.0<br />Species: virginica<br />Petal.Width: 2.0<br />Petal.Length: 5.2","Sepal.Length: 6.2<br />Sepal.Width: 3.4<br />Species: virginica<br />Petal.Width: 2.3<br />Petal.Length: 5.4","Sepal.Length: 5.9<br />Sepal.Width: 3.0<br />Species: virginica<br />Petal.Width: 1.8<br />Petal.Length: 5.1"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(97,156,255,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(97,156,255,1)"}},"hoveron":"points","name":"virginica","legendgroup":"virginica","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":25.74124809741248,"r":7.3059360730593621,"b":39.69558599695587,"l":43.105022831050242},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[4.1200000000000001,8.0800000000000001],"tickmode":"array","ticktext":["5","6","7","8"],"tickvals":[5,6,7,8],"categoryorder":"array","categoryarray":["5","6","7","8"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Sepal length","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1.8799999999999999,4.5200000000000005],"tickmode":"array","ticktext":["2.0","2.5","3.0","3.5","4.0","4.5"],"tickvals":[2,2.5,3,3.5,4,4.5],"categoryorder":"array","categoryarray":["2.0","2.5","3.0","3.5","4.0","4.5"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716894984},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Sepal width","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Species","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"2cb43c412552":{"x":{},"y":{},"colour":{},"label1":{},"label2":{},"type":"scatter"}},"cur_data":"2cb43c412552","visdat":{"2cb43c412552":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<div id="tabset-8-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> iris <span class="sc">|&gt;</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>Species) <span class="sc">|&gt;</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y=</span>value, <span class="at">x=</span>name, <span class="at">fill=</span>Species)) <span class="sc">+</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">position =</span> <span class="fu">position_dodge2</span>(<span class="at">preserve =</span> <span class="st">"single"</span>)) <span class="sc">+</span> </span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"cm"</span>, <span class="at">x=</span><span class="st">""</span>) </span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p) <span class="sc">|&gt;</span> </span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">boxmode =</span> <span class="st">"group"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-7425cd1a13cdfdeae05e" style="width:100%;height:487px;"></div>
<script type="application/json" data-for="htmlwidget-7425cd1a13cdfdeae05e">{"x":{"data":[{"x":[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],"y":[5.0999999999999996,4.9000000000000004,4.9000000000000004,5.4000000000000004,4.9000000000000004,4.4000000000000004,5,5.2000000000000002,4.7000000000000002,5.0999999999999996,5.5,5.5,4.5999999999999996,5,5.4000000000000004,5,5,4.5,4.7999999999999998,4.4000000000000004,5.4000000000000004,4.4000000000000004,4.7999999999999998,4.9000000000000004,4.5999999999999996,5,4.2999999999999998,5.0999999999999996,4.5999999999999996,5.0999999999999996,5.7999999999999998,4.7999999999999998,5.2999999999999998,4.7999999999999998,5.7000000000000002,5,5,5.0999999999999996,5.4000000000000004,5,5.4000000000000004,5.0999999999999996,5.2000000000000002,5.0999999999999996,5.7000000000000002,5.2000000000000002,4.5999999999999996,5.0999999999999996,4.7000000000000002,4.7999999999999998,3.5,3,3.2000000000000002,3.1000000000000001,3,3.7000000000000002,3.6000000000000001,4,3.3999999999999999,2.8999999999999999,3.8999999999999999,4.4000000000000004,3,3.1000000000000001,3.3999999999999999,3.8999999999999999,3.3999999999999999,3.2999999999999998,3.3999999999999999,3.5,3.5,3.3999999999999999,3.7000000000000002,3.7999999999999998,3.3999999999999999,3,3.6000000000000001,3.7999999999999998,3.2000000000000002,3.3999999999999999,3.5,3.3999999999999999,3.1000000000000001,3.5,3.6000000000000001,3.1000000000000001,3.3999999999999999,2.2999999999999998,3,3.2000000000000002,4.0999999999999996,3.2000000000000002,3.2999999999999998,4.2000000000000002,3.5,3.2000000000000002,3.7999999999999998,3.7000000000000002,3,3.7999999999999998,1.5,1.3999999999999999,1.3999999999999999,1.7,1.3,1.3999999999999999,1.3,1.3999999999999999,1.5,1.3999999999999999,1.2,1.6000000000000001,1.3999999999999999,1.7,1.5,1.3999999999999999,1.5,1.5,1.6000000000000001,1.1000000000000001,1.5,1.7,1.6000000000000001,1.5,1.8999999999999999,1.5,1.5,1.3999999999999999,1.6000000000000001,1,1.5,1.3,1.6000000000000001,1.7,1.3999999999999999,1.6000000000000001,1.3,1.3999999999999999,1.5,1.8999999999999999,1.3,1.3,1.2,1.3999999999999999,1.5,1.3,1.6000000000000001,1.3999999999999999,1.5,1.3999999999999999,0.29999999999999999,0.20000000000000001,0.20000000000000001,0.20000000000000001,0.40000000000000002,0.40000000000000002,0.20000000000000001,0.20000000000000001,0.10000000000000001,0.20000000000000001,0.5,0.20000000000000001,0.20000000000000001,0.20000000000000001,0.20000000000000001,0.20000000000000001,0.20000000000000001,0.20000000000000001,0.20000000000000001,0.20000000000000001,0.40000000000000002,0.20000000000000001,0.40000000000000002,0.20000000000000001,0.29999999999999999,0.59999999999999998,0.29999999999999999,0.10000000000000001,0.20000000000000001,0.40000000000000002,0.29999999999999999,0.20000000000000001,0.20000000000000001,0.29999999999999999,0.20000000000000001,0.20000000000000001,0.10000000000000001,0.20000000000000001,0.40000000000000002,0.10000000000000001,0.20000000000000001,0.20000000000000001,0.29999999999999999,0.20000000000000001,0.20000000000000001,0.20000000000000001,0.29999999999999999,0.40000000000000002,0.10000000000000001,0.20000000000000001],"hoverinfo":"y","type":"box","fillcolor":"rgba(248,118,109,1)","marker":{"opacity":null,"outliercolor":"rgba(0,0,0,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"},"size":5.6692913385826778},"line":{"color":"rgba(51,51,51,1)","width":1.8897637795275593},"name":"setosa","legendgroup":"setosa","showlegend":true,"xaxis":"x","yaxis":"y","frame":null},{"x":[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],"y":[7,6.2999999999999998,5.4000000000000004,5.5,6.4000000000000004,5.5999999999999996,6,5.7999999999999998,6.9000000000000004,5.5,6.7000000000000002,6,5.5,5.5,5,4.9000000000000004,6.5,6.0999999999999996,5.9000000000000004,6.5999999999999996,5.7000000000000002,5.7999999999999998,6,5.2000000000000002,6.2999999999999998,5,6.0999999999999996,6.0999999999999996,6.2000000000000002,5.5999999999999996,5.5999999999999996,6.4000000000000004,5.0999999999999996,5.7000000000000002,6.7000000000000002,6.5999999999999996,5.7000000000000002,5.7000000000000002,5.5999999999999996,6.7999999999999998,5.9000000000000004,5.7999999999999998,6.7000000000000002,6.0999999999999996,6.2000000000000002,6,6.2999999999999998,5.5999999999999996,5.7000000000000002,5.5,3.2000000000000002,3.2000000000000002,3.1000000000000001,2.2999999999999998,2.8999999999999999,2,2.7999999999999998,2.8999999999999999,3,2.8999999999999999,2.7999999999999998,3.1000000000000001,2.2000000000000002,2.7000000000000002,3.2999999999999998,3,2.7999999999999998,2.7999999999999998,2.3999999999999999,2.7000000000000002,3,2.8999999999999999,2.7999999999999998,2.2000000000000002,2.8999999999999999,3,2.5,2.5,2.6000000000000001,2.5,3.1000000000000001,3.2000000000000002,2.3999999999999999,2.6000000000000001,2.2999999999999998,3,2.3999999999999999,3,3,3.3999999999999999,2.7000000000000002,2.6000000000000001,2.7999999999999998,2.7000000000000002,2.2999999999999998,2.8999999999999999,2.7000000000000002,2.5,3,2.8999999999999999,4,4.5999999999999996,4.5,4.5,4.9000000000000004,4.7000000000000002,4.5,4.7000000000000002,3.2999999999999998,4.0999999999999996,3.6000000000000001,4.2000000000000002,4.5999999999999996,4.5,4.4000000000000004,4,3.8999999999999999,3.8999999999999999,3.5,4.7000000000000002,3.5,4.7999999999999998,3.7999999999999998,5,4.2999999999999998,4,3.7000000000000002,4.5,4.4000000000000004,4.9000000000000004,3.8999999999999999,4,4.7999999999999998,4.7000000000000002,5.0999999999999996,3.2999999999999998,4.4000000000000004,4.4000000000000004,4.5,4.2000000000000002,4.5999999999999996,4.0999999999999996,4.5,4.2000000000000002,4,4.7000000000000002,4.2000000000000002,4.2999999999999998,3,4.0999999999999996,1.1000000000000001,1.8,1.1000000000000001,1.7,1.3,1,1.5,1.5,1.2,1,1.2,1.6000000000000001,1.3,1.3999999999999999,1.3,1.5,1.5,1.5,1.3999999999999999,1.6000000000000001,1.3,1.5,1.3999999999999999,1.5,1.6000000000000001,1,1.2,1.3,1,1.3,1.3999999999999999,1.3,1.3,1.2,1.2,1.3,1.3999999999999999,1.3,1.5,1.3999999999999999,1,1.3,1,1.3,1.5,1.1000000000000001,1.5,1.3999999999999999,1,1.3],"hoverinfo":"y","type":"box","fillcolor":"rgba(0,186,56,1)","marker":{"opacity":null,"outliercolor":"rgba(0,0,0,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"},"size":5.6692913385826778},"line":{"color":"rgba(51,51,51,1)","width":1.8897637795275593},"name":"versicolor","legendgroup":"versicolor","showlegend":true,"xaxis":"x","yaxis":"y","frame":null},{"x":[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],"y":[6.2999999999999998,6.4000000000000004,6.0999999999999996,7.9000000000000004,5.7999999999999998,6,7.7000000000000002,6.4000000000000004,7.0999999999999996,6.9000000000000004,6.2999999999999998,6.2999999999999998,6.2999999999999998,6.7000000000000002,6.5,7.2999999999999998,6.5,6.9000000000000004,6.4000000000000004,6.7000000000000002,7.5999999999999996,5.7999999999999998,6.7999999999999998,7.2000000000000002,4.9000000000000004,6.7999999999999998,5.7000000000000002,6.2999999999999998,6.5,6.7000000000000002,5.7999999999999998,6.7000000000000002,6.2000000000000002,6.7000000000000002,6.4000000000000004,7.2000000000000002,5.9000000000000004,6.2999999999999998,6.5,6.2000000000000002,6.9000000000000004,7.7000000000000002,6.0999999999999996,5.5999999999999996,7.7000000000000002,6.4000000000000004,7.7000000000000002,6,7.2000000000000002,7.4000000000000004,3.2999999999999998,2.7000000000000002,3,2.8999999999999999,2.5,3.2000000000000002,3,2.7999999999999998,2.7000000000000002,2.5,3,3.2000000000000002,3,3.6000000000000001,2.5,3,2.7999999999999998,2.7000000000000002,2.8999999999999999,3.7999999999999998,3,3.2999999999999998,2.7999999999999998,2.6000000000000001,2.7999999999999998,3.2000000000000002,2.7999999999999998,2.2000000000000002,3,3.1000000000000001,3.3999999999999999,3.2000000000000002,2.7999999999999998,3.1000000000000001,3.1000000000000001,2.6000000000000001,3.7999999999999998,3.1000000000000001,3,3,2.7999999999999998,2.7000000000000002,3,2.7999999999999998,3.2000000000000002,3,3.2999999999999998,3.3999999999999999,3,2.5,5.5999999999999996,5.7999999999999998,5.0999999999999996,6.5999999999999996,5.9000000000000004,4.5,5.5,6,6.2999999999999998,6.7000000000000002,5.0999999999999996,5.2999999999999998,5.7999999999999998,6.9000000000000004,5.2999999999999998,5.5,6.0999999999999996,5,5.7999999999999998,5,5.0999999999999996,5.7000000000000002,6.0999999999999996,4.9000000000000004,5.7000000000000002,4.9000000000000004,6.4000000000000004,5.5999999999999996,6,6.7000000000000002,5.5999999999999996,5.0999999999999996,4.7999999999999998,4.9000000000000004,5.0999999999999996,5.9000000000000004,5.5999999999999996,5.5,5.5999999999999996,5.7000000000000002,5.0999999999999996,4.7999999999999998,6.0999999999999996,5.2000000000000002,5.4000000000000004,5.5999999999999996,5,5.2000000000000002,5.4000000000000004,5.0999999999999996,1.5,2.2999999999999998,1.8999999999999999,1.8,2,2,2.1000000000000001,2,2.2000000000000002,1.6000000000000001,1.8,1.5,1.8,2.5,2.1000000000000001,1.3999999999999999,2.2000000000000002,1.8999999999999999,1.8,2.2999999999999998,2.1000000000000001,2.1000000000000001,1.8,2.3999999999999999,1.7,2.2999999999999998,2.3999999999999999,1.8,1.8,2.5,2.2999999999999998,1.8,1.8,2.2999999999999998,1.8999999999999999,2.1000000000000001,2.5,1.8999999999999999,1.8,2,2,2,2.2000000000000002,2.3999999999999999,1.8999999999999999,2.2999999999999998,2.2999999999999998,2.2999999999999998,2.1000000000000001,1.8],"hoverinfo":"y","type":"box","fillcolor":"rgba(97,156,255,1)","marker":{"opacity":null,"outliercolor":"rgba(0,0,0,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"},"size":5.6692913385826778},"line":{"color":"rgba(51,51,51,1)","width":1.8897637795275593},"name":"virginica","legendgroup":"virginica","showlegend":true,"xaxis":"x","yaxis":"y","frame":null}],"layout":{"margin":{"t":25.74124809741248,"r":7.3059360730593621,"b":25.083713850837142,"l":31.415525114155258},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,4.5999999999999996],"tickmode":"array","ticktext":["Petal.Length","Petal.Width","Sepal.Length","Sepal.Width"],"tickvals":[1,2,3,4],"categoryorder":"array","categoryarray":["Petal.Length","Petal.Width","Sepal.Length","Sepal.Width"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.29000000000000004,8.2900000000000009],"tickmode":"array","ticktext":["0","2","4","6","8"],"tickvals":[-5.5511151231257827e-17,2,4,6,7.9999999999999991],"categoryorder":"array","categoryarray":["0","2","4","6","8"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716894984},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"cm","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Species","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative","boxmode":"group"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"2cb432492fee":{"x":{},"y":{},"fill":{},"type":"box"}},"cur_data":"2cb432492fee","visdat":{"2cb432492fee":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<div id="tabset-8-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x=</span>Sepal.Length, <span class="at">fill=</span>Species)) <span class="sc">+</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-f472971bb40aa4c89b65" style="width:100%;height:487px;"></div>
<script type="application/json" data-for="htmlwidget-f472971bb40aa4c89b65">{"x":{"data":[{"orientation":"v","width":[0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256],"base":[0,0,0,0,2,2,1,1,1,5,6,6,6,9,6,4,9,12,2,8,3,5,1,3,1,1,1,4,0,1],"x":[4.3448275862068968,4.4689655172413794,4.5931034482758619,4.7172413793103454,4.8413793103448279,4.9655172413793105,5.0896551724137939,5.2137931034482765,5.3379310344827591,5.4620689655172416,5.5862068965517242,5.7103448275862068,5.8344827586206902,5.9586206896551728,6.0827586206896562,6.2068965517241388,6.3310344827586214,6.4551724137931039,6.5793103448275865,6.703448275862069,6.8275862068965516,6.9517241379310351,7.0758620689655185,7.2000000000000011,7.3241379310344836,7.4482758620689662,7.5724137931034488,7.6965517241379313,7.8206896551724139,7.9448275862068982],"y":[4,1,4,2,9,8,8,3,6,2,0,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"text":["count: 4<br />Sepal.Length: 4.344828<br />Species: setosa","count: 1<br />Sepal.Length: 4.468966<br />Species: setosa","count: 4<br />Sepal.Length: 4.593103<br />Species: setosa","count: 2<br />Sepal.Length: 4.717241<br />Species: setosa","count: 9<br />Sepal.Length: 4.841379<br />Species: setosa","count: 8<br />Sepal.Length: 4.965517<br />Species: setosa","count: 8<br />Sepal.Length: 5.089655<br />Species: setosa","count: 3<br />Sepal.Length: 5.213793<br />Species: setosa","count: 6<br />Sepal.Length: 5.337931<br />Species: setosa","count: 2<br />Sepal.Length: 5.462069<br />Species: setosa","count: 0<br />Sepal.Length: 5.586207<br />Species: setosa","count: 2<br />Sepal.Length: 5.710345<br />Species: setosa","count: 1<br />Sepal.Length: 5.834483<br />Species: setosa","count: 0<br />Sepal.Length: 5.958621<br />Species: setosa","count: 0<br />Sepal.Length: 6.082759<br />Species: setosa","count: 0<br />Sepal.Length: 6.206897<br />Species: setosa","count: 0<br />Sepal.Length: 6.331034<br />Species: setosa","count: 0<br />Sepal.Length: 6.455172<br />Species: setosa","count: 0<br />Sepal.Length: 6.579310<br />Species: setosa","count: 0<br />Sepal.Length: 6.703448<br />Species: setosa","count: 0<br />Sepal.Length: 6.827586<br />Species: setosa","count: 0<br />Sepal.Length: 6.951724<br />Species: setosa","count: 0<br />Sepal.Length: 7.075862<br />Species: setosa","count: 0<br />Sepal.Length: 7.200000<br />Species: setosa","count: 0<br />Sepal.Length: 7.324138<br />Species: setosa","count: 0<br />Sepal.Length: 7.448276<br />Species: setosa","count: 0<br />Sepal.Length: 7.572414<br />Species: setosa","count: 0<br />Sepal.Length: 7.696552<br />Species: setosa","count: 0<br />Sepal.Length: 7.820690<br />Species: setosa","count: 0<br />Sepal.Length: 7.944828<br />Species: setosa"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"setosa","legendgroup":"setosa","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256],"base":[0,0,0,0,1,0,0,0,0,0,1,1,3,3,2,2,6,9,0,5,2,3,1,3,1,1,1,4,0,1],"x":[4.3448275862068968,4.4689655172413794,4.5931034482758619,4.7172413793103454,4.8413793103448279,4.9655172413793105,5.0896551724137939,5.2137931034482765,5.3379310344827591,5.4620689655172416,5.5862068965517242,5.7103448275862068,5.8344827586206902,5.9586206896551728,6.0827586206896562,6.2068965517241388,6.3310344827586214,6.4551724137931039,6.5793103448275865,6.703448275862069,6.8275862068965516,6.9517241379310351,7.0758620689655185,7.2000000000000011,7.3241379310344836,7.4482758620689662,7.5724137931034488,7.6965517241379313,7.8206896551724139,7.9448275862068982],"y":[0,0,0,0,1,2,1,1,1,5,5,5,3,6,4,2,3,3,2,3,1,2,0,0,0,0,0,0,0,0],"text":["count: 0<br />Sepal.Length: 4.344828<br />Species: versicolor","count: 0<br />Sepal.Length: 4.468966<br />Species: versicolor","count: 0<br />Sepal.Length: 4.593103<br />Species: versicolor","count: 0<br />Sepal.Length: 4.717241<br />Species: versicolor","count: 1<br />Sepal.Length: 4.841379<br />Species: versicolor","count: 2<br />Sepal.Length: 4.965517<br />Species: versicolor","count: 1<br />Sepal.Length: 5.089655<br />Species: versicolor","count: 1<br />Sepal.Length: 5.213793<br />Species: versicolor","count: 1<br />Sepal.Length: 5.337931<br />Species: versicolor","count: 5<br />Sepal.Length: 5.462069<br />Species: versicolor","count: 5<br />Sepal.Length: 5.586207<br />Species: versicolor","count: 5<br />Sepal.Length: 5.710345<br />Species: versicolor","count: 3<br />Sepal.Length: 5.834483<br />Species: versicolor","count: 6<br />Sepal.Length: 5.958621<br />Species: versicolor","count: 4<br />Sepal.Length: 6.082759<br />Species: versicolor","count: 2<br />Sepal.Length: 6.206897<br />Species: versicolor","count: 3<br />Sepal.Length: 6.331034<br />Species: versicolor","count: 3<br />Sepal.Length: 6.455172<br />Species: versicolor","count: 2<br />Sepal.Length: 6.579310<br />Species: versicolor","count: 3<br />Sepal.Length: 6.703448<br />Species: versicolor","count: 1<br />Sepal.Length: 6.827586<br />Species: versicolor","count: 2<br />Sepal.Length: 6.951724<br />Species: versicolor","count: 0<br />Sepal.Length: 7.075862<br />Species: versicolor","count: 0<br />Sepal.Length: 7.200000<br />Species: versicolor","count: 0<br />Sepal.Length: 7.324138<br />Species: versicolor","count: 0<br />Sepal.Length: 7.448276<br />Species: versicolor","count: 0<br />Sepal.Length: 7.572414<br />Species: versicolor","count: 0<br />Sepal.Length: 7.696552<br />Species: versicolor","count: 0<br />Sepal.Length: 7.820690<br />Species: versicolor","count: 0<br />Sepal.Length: 7.944828<br />Species: versicolor"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"versicolor","legendgroup":"versicolor","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256,0.12413793103448256],"base":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[4.3448275862068968,4.4689655172413794,4.5931034482758619,4.7172413793103454,4.8413793103448279,4.9655172413793105,5.0896551724137939,5.2137931034482765,5.3379310344827591,5.4620689655172416,5.5862068965517242,5.7103448275862068,5.8344827586206902,5.9586206896551728,6.0827586206896562,6.2068965517241388,6.3310344827586214,6.4551724137931039,6.5793103448275865,6.703448275862069,6.8275862068965516,6.9517241379310351,7.0758620689655185,7.2000000000000011,7.3241379310344836,7.4482758620689662,7.5724137931034488,7.6965517241379313,7.8206896551724139,7.9448275862068982],"y":[0,0,0,0,1,0,0,0,0,0,1,1,3,3,2,2,6,9,0,5,2,3,1,3,1,1,1,4,0,1],"text":["count: 0<br />Sepal.Length: 4.344828<br />Species: virginica","count: 0<br />Sepal.Length: 4.468966<br />Species: virginica","count: 0<br />Sepal.Length: 4.593103<br />Species: virginica","count: 0<br />Sepal.Length: 4.717241<br />Species: virginica","count: 1<br />Sepal.Length: 4.841379<br />Species: virginica","count: 0<br />Sepal.Length: 4.965517<br />Species: virginica","count: 0<br />Sepal.Length: 5.089655<br />Species: virginica","count: 0<br />Sepal.Length: 5.213793<br />Species: virginica","count: 0<br />Sepal.Length: 5.337931<br />Species: virginica","count: 0<br />Sepal.Length: 5.462069<br />Species: virginica","count: 1<br />Sepal.Length: 5.586207<br />Species: virginica","count: 1<br />Sepal.Length: 5.710345<br />Species: virginica","count: 3<br />Sepal.Length: 5.834483<br />Species: virginica","count: 3<br />Sepal.Length: 5.958621<br />Species: virginica","count: 2<br />Sepal.Length: 6.082759<br />Species: virginica","count: 2<br />Sepal.Length: 6.206897<br />Species: virginica","count: 6<br />Sepal.Length: 6.331034<br />Species: virginica","count: 9<br />Sepal.Length: 6.455172<br />Species: virginica","count: 0<br />Sepal.Length: 6.579310<br />Species: virginica","count: 5<br />Sepal.Length: 6.703448<br />Species: virginica","count: 2<br />Sepal.Length: 6.827586<br />Species: virginica","count: 3<br />Sepal.Length: 6.951724<br />Species: virginica","count: 1<br />Sepal.Length: 7.075862<br />Species: virginica","count: 3<br />Sepal.Length: 7.200000<br />Species: virginica","count: 1<br />Sepal.Length: 7.324138<br />Species: virginica","count: 1<br />Sepal.Length: 7.448276<br />Species: virginica","count: 1<br />Sepal.Length: 7.572414<br />Species: virginica","count: 4<br />Sepal.Length: 7.696552<br />Species: virginica","count: 0<br />Sepal.Length: 7.820690<br />Species: virginica","count: 1<br />Sepal.Length: 7.944828<br />Species: virginica"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(97,156,255,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"virginica","legendgroup":"virginica","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":25.74124809741248,"r":7.3059360730593621,"b":39.69558599695587,"l":48.949771689497737},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[4.0965517241379317,8.1931034482758633],"tickmode":"array","ticktext":["5","6","7","8"],"tickvals":[5,6,7,8],"categoryorder":"array","categoryarray":["5","6","7","8"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Sepal.Length","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.60000000000000009,12.6],"tickmode":"array","ticktext":["0.0","2.5","5.0","7.5","10.0","12.5"],"tickvals":[0,2.5,5,7.5,10,12.5],"categoryorder":"array","categoryarray":["0.0","2.5","5.0","7.5","10.0","12.5"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716894984},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"count","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Species","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"2cb43f2360fe":{"x":{},"fill":{},"type":"bar"}},"cur_data":"2cb43f2360fe","visdat":{"2cb43f2360fe":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="theme-settings" class="level2">
<h2 class="anchored" data-anchor-id="theme-settings">Theme settings</h2>
<p>ggplot2 comes with a couple of themes to choose from, which are displayed below (<code>theme_gray()</code>,<code>theme_minimal()</code>,<code>theme_bw()</code>,<code>theme_classic()</code>,<code>theme_dark()</code>,<code>theme_light()</code>). Custom themes can also be set up, see e.g.&nbsp;<a href="https://rpubs.com/mclaire19/ggplot2-custom-themes">Learning to create custom themes in ggplot</a> for a tutorial. Custom themes might be added to this document at a later date.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x=</span>Sepal.Length, <span class="at">y=</span>Sepal.Width, <span class="at">color=</span>Species)) <span class="sc">+</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">show.legend =</span> F) <span class="sc">+</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Sepal length"</span>) <span class="sc">+</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Sepal width"</span>)</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>(p1 <span class="sc">+</span> <span class="fu">theme_gray</span>() <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"Gray"</span>)) <span class="sc">+</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>(p1 <span class="sc">+</span> <span class="fu">theme_minimal</span>()<span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"Minimal"</span>)) <span class="sc">+</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>(p1 <span class="sc">+</span> <span class="fu">theme_bw</span>()<span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"Black and white"</span>)) <span class="sc">+</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>(p1 <span class="sc">+</span> <span class="fu">theme_classic</span>()<span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"Classic"</span>)) <span class="sc">+</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>(p1 <span class="sc">+</span> <span class="fu">theme_dark</span>()<span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"Dark"</span>)) <span class="sc">+</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>(p1 <span class="sc">+</span> <span class="fu">theme_light</span>()<span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"Light"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/theme-defaults-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<section id="color-palettes" class="level3">
<h3 class="anchored" data-anchor-id="color-palettes">Color palettes</h3>
<p>Color palettes can be defined through lists of either default colors supported in ggplot2 or through the colors RGB representation. They can also be named in cases where matches between specific groups and colors are desired.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>my_palette1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'purple'</span>, <span class="st">'orange'</span>, <span class="st">'aquamarine3'</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>my_palette2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'virginica'</span> <span class="ot">=</span> <span class="st">'#FF0000'</span>, <span class="st">'setosa'</span> <span class="ot">=</span> <span class="st">'#00FF00'</span>, <span class="st">'versicolor'</span> <span class="ot">=</span> <span class="st">'#0000FF'</span>) <span class="co"># Fully Red, Green, Blue in RGB notation</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x=</span>Sepal.Length, <span class="at">y=</span>Sepal.Width, <span class="at">color=</span>Species)) <span class="sc">+</span> </span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Sepal length"</span>) <span class="sc">+</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Sepal width"</span>) </span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>(p1 <span class="sc">+</span> <span class="fu">scale_color_manual</span>(<span class="at">values =</span> my_palette1)) <span class="sc">+</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>  (p1 <span class="sc">+</span> <span class="fu">scale_color_manual</span>(<span class="at">values =</span> my_palette2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/palettes-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Here are some examples of color palettes from the <a href="https://colorbrewer2.org">ColorBrewer set</a>. These can easily be used with ggplot through the function <code>scale_colour_brewer(palette = "palette name")</code>. Further palettes can be acquired from the R package <a href="https://emilhvitfeldt.github.io/paletteer/">Paletteer</a> which contains more than 2000 color palettes, including continuous palettes, and functions for simple use with ggplot.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-9-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-1" role="tab" aria-controls="tabset-9-1" aria-selected="true">Qualitative</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-2" role="tab" aria-controls="tabset-9-2" aria-selected="false">Sequential</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-3" role="tab" aria-controls="tabset-9-3" aria-selected="false">Diverging</a></li></ul>
<div class="tab-content">
<div id="tabset-9-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-9-1-tab">
<p>The qualitative colors of the Colorbrewer set are shown below. These are useful for distinguishing between different groups of data. For example, the different flower species in the iris data set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">display.brewer.all</span>(<span class="at">type=</span><span class="st">'qual'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-9-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-2-tab">
<p>Below are the sequential colors of the Colorbrewer set, useful for ordered data visualizations such as heat maps.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">display.brewer.all</span>(<span class="at">type=</span><span class="st">'seq'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-9-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-3-tab">
<p>The diverging colors diverge in two directions from a central color, emphasizing a mid-range value and/or the extremes. Useful for comparisons in relation to a chosen value/group or for loose groupings of ordered data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">display.brewer.all</span>(<span class="at">type=</span><span class="st">'div'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="legends" class="level3">
<h3 class="anchored" data-anchor-id="legends">Legends</h3>
<p>Legends in ggplot are very customizable in position and theme. Below are some examples and options reference for customization of legends. I would recommend to set many of these options on a theme basis rather than individual basis, however, here some are set on an individual basis to show more examples within a small space.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-10-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-1" role="tab" aria-controls="tabset-10-1" aria-selected="true">Position</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-2" role="tab" aria-controls="tabset-10-2" aria-selected="false">Justification</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-3" role="tab" aria-controls="tabset-10-3" aria-selected="false">Text</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-4" role="tab" aria-controls="tabset-10-4" aria-selected="false">Colors and spacing</a></li></ul>
<div class="tab-content">
<div id="tabset-10-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-10-1-tab">
<ul>
<li><strong>guide_legend()</strong> and <strong>guide_colorbar()</strong> are used in conjunction with <code>guides()</code> to specify aspects of legend guides (<a href="https://ggplot2.tidyverse.org/reference/guide_legend.html">Legend reference</a>, <a href="https://ggplot2.tidyverse.org/reference/scale_colour_continuous.html">Colorbar reference</a>). Here are some of the arguments:
<ul>
<li><strong>position</strong>: Position of the legend relative to the chart. One of <code>"top"</code>, <code>"right"</code>, <code>"bottom"</code>, <code>"left"</code> or <code>"inside"</code></li>
<li><strong>order</strong> (integer): Order in which the guides are shown.</li>
<li><strong>ncol/nrow</strong>: Sets number of columns or rows of legend items (only guide_legend)</li>
<li><strong>direction</strong>: Direction of the legend (<code>horizontal</code> or <code>vertical</code>)</li>
</ul></li>
<li><strong>legend.position</strong>: Default position of the legends</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> mtcars <span class="sc">|&gt;</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>mpg, <span class="at">y=</span>wt, <span class="at">color=</span>hp, <span class="at">shape=</span><span class="fu">as.factor</span>(gear), <span class="at">size=</span>disp, <span class="at">fill =</span> <span class="fu">as.factor</span>(cyl))) <span class="sc">+</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="fu">guide_colorbar</span>(<span class="at">position =</span> <span class="st">"top"</span>, <span class="at">order =</span> <span class="dv">1</span>),</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">shape =</span> <span class="fu">guide_legend</span>(<span class="at">position =</span> <span class="st">"inside"</span>, <span class="at">direction =</span> <span class="st">"horizontal"</span>),</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fu">guide_legend</span>(<span class="at">position =</span> <span class="st">"top"</span>, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">order =</span> <span class="dv">2</span>),</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">position =</span> <span class="st">"inside"</span>)</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_binned</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">8</span>), <span class="at">n.breaks =</span> <span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position.inside =</span> <span class="fu">c</span>(<span class="fl">0.8</span>, <span class="fl">0.8</span>))</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/legend_pos-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-10-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-2-tab">
<ul>
<li><strong>legend.position.inside</strong>: Legend placement when legend position is set to inside. (<code>c(a, b)</code>, where <span class="math inline">\(a,b \in [0,1]\)</span>).</li>
<li><strong>legend.justification</strong>: Justification of legends relative to plot. One of “left”, “right”, “top”, “bottom”, “center” or 2-dimensional vector (text or numeric). E.g. <code>c(0, 1)</code>, <code>c("left", "top")</code>.
<ul>
<li>can be set individually for each legend position with: <strong>legend.justification.top</strong>, <strong>legend.justification.bottom</strong>, <strong>legend.justification.left</strong>, <strong>legend.justification.right</strong>, <strong>legend.justification.inside</strong>.</li>
</ul></li>
<li><strong>legend.box.just</strong>: Justification of legends within the bounding box.</li>
<li><strong>legend.box</strong>: Arrangement of legends within the bounding box. <code>"horizontal"</code> or <code>"vertical"</code></li>
</ul>
<p>Legend bounding box is set with a background and margin here to show its relation to the legends.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>p  <span class="sc">+</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position.inside =</span> <span class="cn">NULL</span>,</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="st">"left"</span>,</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification.inside =</span> <span class="fu">c</span>(<span class="st">"right"</span>,<span class="st">"top"</span>),</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">fill=</span><span class="st">"gray"</span>),</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.box.margin =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">"mm"</span>),</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.box.just =</span> <span class="fu">c</span>(<span class="st">"center"</span>, <span class="st">"bottom"</span>),</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.box =</span> <span class="st">"horizontal"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/legend_just-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-10-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-3-tab">
<ul>
<li><strong>legend.title.position</strong>: Legend title position relative to legend. Can be set to one of <code>"top"</code>, <code>"bottom"</code>, <code>"left"</code>, <code>"right"</code></li>
<li><strong>legend.title</strong>: Options for legend title. Can be set with <code>element_text()</code> (see <a href="#elements">element_text</a>).</li>
<li><strong>legend.text</strong>: Options for the key-text. Can be set with <code>element_text()</code>.</li>
<li><strong>legend.text.position</strong>: The position of the text relative to the keys. One of <code>"top"</code>, <code>"bottom"</code>, <code>"left"</code>, <code>"right"</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>mpg, <span class="at">y=</span>wt, <span class="at">color=</span>hp, <span class="at">shape=</span><span class="fu">as.factor</span>(gear), <span class="at">size=</span>disp)) <span class="sc">+</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="fu">guide_colorbar</span>(<span class="at">position =</span> <span class="st">"top"</span>,</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>                           <span class="at">theme =</span> <span class="fu">theme</span>(<span class="at">legend.title.position =</span> <span class="st">"top"</span>,</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">size=</span><span class="dv">15</span>))),</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">shape =</span> <span class="fu">guide_legend</span>(<span class="at">theme =</span> <span class="fu">theme</span>(<span class="at">legend.text.position =</span> <span class="st">"left"</span>)),</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fu">guide_legend</span>(<span class="at">theme =</span> <span class="fu">theme</span>(<span class="at">legend.text.position =</span> <span class="st">"top"</span>))</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">color=</span> <span class="st">"Centered and enlarged legend title"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/legend_text-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-10-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-4-tab">
<p>Background colors and borders for the components of legends can be set with <code>element_rect()</code> (see <a href="#elements">element_rect</a>). The theme options also contain many options for spacing and margins, where spacings can be set with <code>unit()</code> and margins with <code>margin()</code></p>
<p>For a full list of modifiable elements see <a href="https://ggplot2.tidyverse.org/reference/theme.html">theme reference</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span> </span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>mpg, <span class="at">y=</span>wt, <span class="at">color=</span>hp, <span class="at">shape=</span><span class="fu">as.factor</span>(gear), <span class="at">size=</span>disp)) <span class="sc">+</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fu">guide_legend</span>(<span class="at">theme =</span> <span class="fu">theme</span>(<span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill=</span><span class="st">"orange"</span>, <span class="at">color=</span><span class="st">"aquamarine"</span>))),</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">shape =</span> <span class="fu">guide_legend</span>(<span class="at">theme =</span> <span class="fu">theme</span>(<span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"purple"</span>),</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">legend.key.spacing.y =</span> <span class="fu">unit</span>(<span class="dv">1</span>, <span class="st">"mm"</span>))),</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="fu">guide_colorbar</span>(<span class="at">position =</span> <span class="st">"top"</span>, </span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>                           <span class="at">theme =</span> <span class="fu">theme</span>(<span class="at">legend.frame =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">"red"</span>)))</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/legend_color-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="elements" class="level3">
<h3 class="anchored" data-anchor-id="elements">Elements</h3>
<p>The elements <code>element_line()</code>, <code>element_rect()</code>, <code>element_text()</code> and <code>element_blank()</code> are used in many of the attributes of the theme to set visuals of non-data components. Below are the attributes of each element type and some simple examples. For further information see <a href="https://ggplot2.tidyverse.org/reference/element.html">Reference</a>.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-11-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-1" role="tab" aria-controls="tabset-11-1" aria-selected="true">Line</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-2" role="tab" aria-controls="tabset-11-2" aria-selected="false">Rectangle</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-3" role="tab" aria-controls="tabset-11-3" aria-selected="false">Text</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-4" role="tab" aria-controls="tabset-11-4" aria-selected="false">Blank</a></li></ul>
<div class="tab-content">
<div id="tabset-11-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-11-1-tab">
<p><code>element_line()</code> is used to specify lines and has the following arguments:</p>
<ul>
<li><strong>color/colour</strong>: Color of the line</li>
<li><strong>linewidth</strong>: Line width in mm</li>
<li><strong>linetype</strong>: Type pf line (e.g.&nbsp;solid, dashed, etc.). Integer in <span class="math inline">\([0,8]\)</span>, a string (<code>"blank"</code>, <code>"solid"</code>, <code>"dashed"</code>, <code>"dotted"</code>, <code>"dotdash"</code>, <code>"longdash"</code>, <code>"twodash"</code>) or a custom sequence of hexadecimal numbers defined through a string, e.g.&nbsp;<code>"3121"</code> (see <a href="https://ggplot2.tidyverse.org/reference/aes_linetype_size_shape.html">reference</a> for more information)</li>
<li><strong>lineend</strong>: Line end type. One of <code>"butt"</code>, <code>"round"</code> or <code>"square"</code></li>
<li><strong>arrow</strong>: An arrow from <code>grid::arrow()</code> (see <a href="https://stat.ethz.ch/R-manual/R-devel/library/grid/html/arrow.html">documentation</a> for more information)</li>
</ul>
<p>In this example <code>geom_segment()</code> is used to show the different options, however, in theme settings the lines are set with <code>attribute = element_line(options)</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x=</span><span class="dv">0</span>, <span class="at">xend=</span><span class="dv">10</span>, <span class="at">y=</span><span class="dv">5</span><span class="sc">:</span><span class="dv">1</span>)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>options <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">linewidth =</span> <span class="dv">2</span>, <span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">linetype =</span> <span class="dv">2</span>, <span class="at">lineend =</span> <span class="st">"round"</span>, <span class="at">arrow=</span><span class="fu">arrow</span>())</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>descr <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Line width = 2"</span>, <span class="st">'color = "blue"'</span>, <span class="st">"linetype = 2 (dashed)"</span>, <span class="st">"lineend = round"</span>, <span class="st">"arrow = arrow()"</span>)</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">linewidth=</span><span class="dv">4</span>, <span class="at">x=</span>x, <span class="at">xend=</span>xend, <span class="at">y=</span>y, <span class="at">yend=</span>y))</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>){</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">do.call</span>({<span class="cf">function</span>(...) <span class="fu">geom_segment</span>(<span class="at">data =</span> df[i,], ...)}, options[i])</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x=</span><span class="dv">5</span>, <span class="at">y=</span><span class="fl">6.2</span><span class="sc">-</span>i, <span class="at">label=</span>descr[i])</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="dv">6</span>) <span class="sc">+</span> <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">11</span>) <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">linewidth=</span><span class="st">"none"</span>) <span class="sc">+</span> <span class="fu">theme_element_example</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/element_line-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-11-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-2-tab">
<p>The rectangle element <code>element_rect()</code> is a rather simple element with the following arguments:</p>
<ul>
<li><strong>fill</strong>: Color to fill rectangle with.</li>
<li><strong>color/colour</strong>: Color of the border.</li>
<li><strong>linewidth</strong>: Width of the border line in mm.</li>
<li><strong>linetype</strong>: line type of the border.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>(<span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme</span>(<span class="at">panel.background =</span> </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>           <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"orange"</span>,</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">color=</span> <span class="st">"cyan"</span>,</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>                        <span class="at">linewidth=</span><span class="dv">3</span>,</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>                        <span class="at">linetype=</span><span class="st">"dashed"</span>)) <span class="sc">+</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ggtitle</span>(<span class="st">"Square with dashed line"</span>)) <span class="sc">+</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>(<span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme</span>(<span class="at">panel.background =</span> </span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>           <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="fu">alpha</span>(<span class="st">"red"</span>, <span class="fl">0.4</span>),</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>                        <span class="at">linewidth=</span><span class="cn">NULL</span>)) <span class="sc">+</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ggtitle</span>(<span class="st">"No line and alpha = 0.4"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/element_rect-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-11-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-3-tab">
<p><code>element_text()</code> is used to specify the theme of the text and has the following arguments:</p>
<ul>
<li><strong>family</strong>: Font family, e.g (<code>"Times new roman"</code>, <code>"Calibri"</code>)</li>
<li><strong>face</strong>: <code>"plain"</code>, <code>"bold"</code>, <code>"italic"</code>, or <code>"bold.italic"</code>.</li>
<li><strong>color/colour</strong>: Color of the text.</li>
<li><strong>size</strong>: Size of text in pts.</li>
<li><strong>hjust</strong>: Horizontal justification of text. One of <code>"left"</code>, <code>"center"</code>, <code>"right"</code> or <span class="math inline">\(\in [0, 1]\)</span> (left = 0, center = 0.5, right = 1, etc.).</li>
<li><strong>vjust</strong>: Vertical justification of text. One of <code>"top"</code>, <code>"center"</code>, <code>"bottom"</code> or <span class="math inline">\(\in [0, 1]\)</span> (bottom = 0, center = 0.5, top = 1, etc.)</li>
<li><strong>angle</strong>: Angle of text in degrees.</li>
<li><strong>lineheight</strong>: Height between rows in multi-line text.</li>
<li><strong>margin</strong>: Margin around text. Defined with <code>margin(t, r, b, l, unit="pt")</code> (letters stand for top, right, bottom and left margins).</li>
</ul>
<p>Examples are shown with <code>annotate()</code> where the attributes can be set directly, however, in theme settings they are set with <code>attribute = element_text(options)</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(extrafont) </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Warning! Ugly code.</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">theme_element_example</span>() <span class="sc">+</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"hjust/vjust"</span>)  <span class="sc">+</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="dv">0</span>,<span class="dv">5</span>) <span class="sc">+</span> <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fl">2.5</span>, <span class="at">alpha=</span><span class="fl">0.3</span>) <span class="sc">+</span> </span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">1</span>, <span class="at">alpha=</span><span class="fl">0.3</span>) <span class="sc">+</span> </span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fl">2.5</span>, <span class="at">y=</span><span class="fl">4.5</span>, <span class="at">label=</span><span class="st">'hjust = "right"'</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">hjust=</span><span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fl">2.5</span>, <span class="at">y=</span><span class="fl">3.5</span>, <span class="at">label=</span><span class="st">'hjust = "center"'</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">hjust=</span><span class="st">"center"</span>) <span class="sc">+</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fl">2.5</span>, <span class="at">y=</span><span class="fl">2.5</span>, <span class="at">label=</span><span class="st">'hjust = "left"'</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">hjust=</span><span class="st">"left"</span>) <span class="sc">+</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fl">0.7</span>, <span class="at">y=</span><span class="dv">1</span>, <span class="at">label=</span><span class="st">'vjust = "bottom"'</span>, <span class="at">size =</span> <span class="fl">4.5</span>, <span class="at">vjust=</span><span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fl">2.5</span>, <span class="at">y=</span><span class="dv">1</span>, <span class="at">label=</span><span class="st">'vjust = "center"'</span>, <span class="at">size =</span> <span class="fl">4.5</span>, <span class="at">vjust=</span><span class="st">"center"</span>) <span class="sc">+</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fl">4.3</span>, <span class="at">y=</span><span class="dv">1</span>, <span class="at">label=</span><span class="st">'vjust = "top"'</span>, <span class="at">size =</span> <span class="fl">4.5</span>, <span class="at">vjust=</span><span class="st">"top"</span>) </span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">theme_element_example</span>() <span class="sc">+</span></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Other"</span>) <span class="sc">+</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="dv">0</span>,<span class="dv">5</span>) <span class="sc">+</span> <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x=</span><span class="dv">1</span>, <span class="at">y=</span><span class="dv">4</span>, <span class="at">size=</span><span class="dv">6</span>, <span class="at">label=</span><span class="st">"Line height is</span><span class="sc">\n</span><span class="st"> equal to 1"</span>, <span class="at">lineheight=</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x=</span><span class="dv">1</span>, <span class="at">y=</span><span class="fl">1.5</span>, <span class="at">size=</span><span class="dv">6</span>, <span class="at">label=</span><span class="st">"Line height is</span><span class="sc">\n</span><span class="st"> equal to 2"</span>, <span class="at">lineheight=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x=</span><span class="fl">3.8</span>, <span class="at">y=</span><span class="fl">4.5</span>, <span class="at">size=</span><span class="dv">6</span>, <span class="at">label=</span><span class="st">"Times New Roman"</span>, <span class="at">family=</span><span class="st">"Times New Roman"</span>) <span class="sc">+</span> </span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x=</span><span class="dv">4</span>, <span class="at">y=</span><span class="fl">3.5</span>, <span class="at">size=</span><span class="dv">6</span>, <span class="at">label=</span><span class="st">"Blue text"</span>, <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x=</span><span class="dv">4</span>, <span class="at">y=</span><span class="fl">2.5</span>, <span class="at">size=</span><span class="dv">6</span>, <span class="at">label=</span><span class="st">"Bold text"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x=</span><span class="dv">4</span>, <span class="at">y=</span><span class="dv">1</span>, <span class="at">size=</span><span class="dv">6</span>, <span class="at">label=</span><span class="st">"Rotated text"</span>, <span class="at">angle=</span><span class="dv">30</span>)</span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine plots</span></span>
<span id="cb40-27"><a href="#cb40-27" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> p2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/element_text-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-11-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-4-tab">
<p><code>element_blank()</code> is used to exclude attributes of being displayed. In the below example the axis text and grid lines are removed, however, most attributes can be removed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(Petal.Length, Petal.Width, <span class="at">color=</span>Species)) <span class="sc">+</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text =</span> <span class="fu">element_blank</span>(), <span class="at">panel.grid =</span> <span class="fu">element_blank</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/element_blank-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="units-margins" class="level3">
<h3 class="anchored" data-anchor-id="units-margins">Units and margins</h3>
<p>Many theme components can be set with the <code>unit()</code> and <code>margin()</code> functions.</p>
<p><code>unit(l, unit)</code> is set with a length and a unit and represents the length in that unit. Supported units are e.g.&nbsp;<code>"mm"</code>, <code>"cm"</code>, <code>"points"</code>, <code>"inches"</code> etc. See <a href="https://stat.ethz.ch/R-manual/R-devel/library/grid/html/unit.html">reference</a> for more information.</p>
<p><code>margin(t, r, b, l, unit)</code> is used to set margin theme options. It is set with a distance for each direction and a unit (which defaults to <code>"pt"</code>). The letters represent the following – t: top, r: right, b: bottom, l: left. Margin options can also be set by <code>unit()</code> if the same margins in all directions is desired.</p>
<p>Below are some examples of how units and margins can be used with legend components.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>mpg, <span class="at">y=</span>wt, <span class="at">color=</span>hp, <span class="at">shape=</span><span class="fu">as.factor</span>(gear), <span class="at">size=</span>disp)) <span class="sc">+</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fu">guide_legend</span>(<span class="at">theme =</span> <span class="fu">theme</span>()),</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">shape =</span> <span class="fu">guide_legend</span>(<span class="at">theme =</span> <span class="fu">theme</span>(<span class="at">legend.key.height =</span> <span class="fu">unit</span>(<span class="fl">0.4</span>, <span class="st">"inch"</span>), <span class="co"># height of legend key</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="fl">0.4</span>, <span class="st">"inch"</span>), <span class="co"># width of legend key</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">legend.key.spacing.y =</span> <span class="fu">unit</span>(<span class="dv">1</span>, <span class="st">"mm"</span>))),</span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="fu">guide_colorbar</span>(<span class="at">position =</span> <span class="st">"top"</span>, </span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>                           <span class="at">theme =</span> <span class="fu">theme</span>(<span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="dv">10</span>, <span class="st">"cm"</span>))) <span class="co"># length of color</span></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">fill=</span><span class="st">"gray"</span>),</span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>              <span class="at">legend.box.margin =</span> <span class="fu">margin</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="st">"mm"</span>)) <span class="co"># legend bounding box margin</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot2_quick_ref_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>